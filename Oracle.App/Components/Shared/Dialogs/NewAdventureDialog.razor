@using Oracle.Data.Models
@using Oracle.Logic.Services


<MudDialog>
	<TitleContent>
		<MudText Typo="Typo.h6">
			Add new adventure
		</MudText>
	</TitleContent>
	<DialogContent>
		<MudTextField Variant="Variant.Outlined" Label="Name" @bind-Value="NewAdventureName"></MudTextField>
		<MudTextField Variant="Variant.Outlined" Label="Description" @bind-Value="NewAdventureDescription" Lines="5"/>
	</DialogContent>
	<DialogActions>
		<MudButton Disabled="ProcessingNewAdventure" OnClick="Cancel">Cancel</MudButton>
		<MudButton Disabled="ProcessingNewAdventure" Color="Color.Primary" OnClick="Submit">Ok</MudButton>
	</DialogActions>
</MudDialog>



@code
{
	[CascadingParameter] MudDialogInstance MudDialog { get; set; }
	[Inject] AdventureService AdventureService { get; set; } = null!;

	private bool ProcessingNewAdventure { get; set; } = false;

	// Adventure Fields
	private string NewAdventureName { get; set; }
	private string NewAdventureDescription { get; set; }

	private async Task Submit()
	{
		ProcessingNewAdventure = true;
		await AdventureService.AddAdventure(NewAdventureName, NewAdventureDescription);

		MudDialog.Close(DialogResult.Ok(NewAdventureName));
	}

	void Cancel() => MudDialog.Cancel();
}
