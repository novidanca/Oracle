@using TinyMCE.Blazor

<Editor @bind-Value="Value" Conf="EditorConf" ScriptSrc="js/tinymce/tinymce.min.js" />

@code {
	[Parameter]
	public string Value
	{
		get => _value;
		set
		{
			if (_value == value) return;

			_value = value;
			ValueChanged.InvokeAsync(value);
		} }

	private string _value;

	[Parameter]
	public EventCallback<string> ValueChanged { get; set; }

	private Dictionary<string, object> EditorConf;

	protected override void OnInitialized()
	{
		base.OnInitialized();

		EditorConf = new Dictionary<string, object>
		{
			{ "license_key", "gpl" },
			{ "plugins", "table" },
			{ "branding", false },
			{ "menubar", false },
			{ "toolbar", "bold italic underline | fontfamily fontsize blocks | forecolor backcolor | blockquote table " }
		};
	}
    
	private void OnValueChange(string newValue)
	{
		Value = newValue;
		ValueChanged.InvokeAsync(newValue);
	}
}